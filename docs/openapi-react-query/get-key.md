---
title: getKey
---
# {{ $frontmatter.title }}

The `getKey` method allows you to generate a cache key consistent with the `useQuery` and `useMutation` methods. This method is useful if you need to invalidate a key in the `queryClient`.

::: tip
You can find more about this pattern in the [Invalidation from Mutations](https://tanstack.com/query/latest/docs/framework/react/guides/invalidations-from-mutations) section of react-query.
:::

## Example

::: code-group

```tsx [src/app.tsx]
import { $api } from "./api";

export const App = () => {
  const { mutate } = $api.useMutation("delete", "/users", {
    onSuccess: () => {
      const queryKey = $api.getKey("get", "/count-users");
      $api.client.invalidateQueries({ queryKey });
    },
  });

  return (
    <button onClick={() => mutate({ body: { firstname: "John" } })}>
      Delete John
    </button>
  );
};
```

```ts [src/api.ts]
import createFetchClient from "openapi-fetch";
import createClient from "openapi-react-query";
import type { paths } from "./my-openapi-3-schema"; // generated by openapi-typescript

const fetchClient = createFetchClient<paths>({
  baseUrl: "https://myapi.dev/v1/",
});
export const $api = createClient(fetchClient);
```

:::

## Api

```tsx
const queryKey = $api.getKey(method, path, init);
```

**Arguments**

- `method` **(required)**
  - The HTTP method to use for the request.
  - The method is used as key. See [Query Keys](https://tanstack.com/query/latest/docs/framework/react/guides/query-keys) for more information.
- `path` **(required)**
  - The pathname to use for the request.
  - Must be an available path for the given method in your schema.
  - The pathname is used as key. See [Query Keys](https://tanstack.com/query/latest/docs/framework/react/guides/query-keys) for more information.
- `init`
  - The fetch options to use for the request.